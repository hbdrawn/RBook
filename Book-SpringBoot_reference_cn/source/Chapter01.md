 技术概览

    1.1 CEP介绍 & 解析事件流
    
    Esper引擎的出现是为了满足一些应用需要对事件进行分析和处理的需求。一些典型的例子是：

    业务流程管理和自动化（过程监控，BAM， 异常报告）

    金融应用（算法贸易，诈骗识别，风险控制）

    网络和应用监控（入侵检测，SLA监控）

    网络传感器应用（RFID读取，生产线调度和控制，空中交通管制）


    这些应用都有一个共同的需求，就是要实时或者近实时地处理事件或者信息。有时是要进行复杂事件处理（CEP）和事件流分析。
    满足这类应用的关键因素有吞吐量，延迟以及复杂的逻辑。
    
    高吞吐量-应用要的单位时间处理大量的信息（100k-1,000k/秒） 

    低延迟-应用要实时地处理对应的事件（几毫秒到几秒） 

    复杂计算-应用需要从事件（或事件关联性）检测到所需模式，过滤事件，统计窗口事件的时间和长度，加入事件流，基于缺失事件的触发等等。

    Esper引擎就是设计用来简化构建或者扩展这类复杂事件处理应用。

    1.2 CEP与数据库
	
	关系型数据库和标准查询语句是专为大部分数据相对静态和没有频繁复杂查询的应用设计的。同样，大部分数据库将数据存储在硬盘上（除了内存数据库）并且它们为磁盘读取做了优化。
	
	一个应用要想从数据库中检索数据，就必须声明一个查询。如果一个应用每秒需要某个数据10次，它就必须触发10次这个查询动作。显而易见，这种设计不利于将这样的查询操作扩展到每秒数百次甚至数千次。
	
	数据库触发器能响应并触发一个数据库更新事件。然后数据库触发器操作比较慢，通常情况下也不能很好地执行复杂条件检查以及实现一些复杂的触发逻辑。
	
	内存数据库可能比传统的关系数据更适合复杂事件处理应用，因为内存数据库通常查询效率非常高。但它们同样不能满足CEP和事件流分析所需的即时，实时的最优查询。

    1.3 Esper引擎
	Esper引擎的工作原理有点像把数据库颠倒过来。Esper引擎允许程序存储查询并操作数据，而不是存储数据和基于存储数据的查询。当条件匹配Esper的查询时，Esper的响应是实时的。因此Esper的执行模块也是连续的，而不是只有在有查询提交时。
	
	Esper提供两种方法或者说机制来处理事件： 事件模式和事件流查询。
	
	Esper提供了一种事件模式语言来具体地表示事件模式匹配。事件模式匹配引擎的根本是一个状态机的实现。这种事件处理方法匹配了存在的期望序列或者缺失事件或者事件组合。它包括了基于时间的事件关联。
	
	Esper同时也提供了一种事件流查询来解决CEP应用的事件流分析需求。事件流查询为事件流提供了窗口，聚合，连接和分析函数。这些查询是遵循EPL语法的。EPL是类似SQL的查询语句，不同在于EPL是基于视图而不是表。视图能表示在一个事件流中构造数据和衍生数据所需的不同操作。
	
	Esper在同一API中提供了这两种方法以作替代选择。
	
    1.4 第三方依赖库
	
	Esper需要以下的运行时依赖库
	
	ANTLR
	CGLIB
	Apache commons logging
	
	Esper需要以下的编译时和测试依赖库
	
	JUnit
	MySQL connector

